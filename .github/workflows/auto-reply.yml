      - name: Generate AI response using Gemini API
        id: ai
        run: |
          PROMPT=$(cat <<EOF
You are a helpful assistant responding to students' questions about software project ideas.

Here is the project description:
${PROJECT_DESC}

Discussion title:
${DISCUSSION_TITLE}

Initial post:
${DISCUSSION_BODY}

Previous comments:
${COMMENTS}

New student question:
${NEW_COMMENT}

Please provide a clear and concise answer.
EOF
)

          JSON_PAYLOAD=$(jq -n \
            --arg prompt "$PROMPT" \
            '{
              contents: [
                {
                  role: "user",
                  parts: [ { text: $prompt } ]
                }
              ]
            }')

          RESPONSE=$(curl -s \
            -X POST "https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${{ secrets.GEMINI_API_KEY }}" \
            -H "Content-Type: application/json" \
            -d "$JSON_PAYLOAD")

          echo "$RESPONSE" > response.json
          AI_REPLY=$(jq -r '.candidates[0].content.parts[0].text' response.json)

          echo "AI_REPLY<<EOF" >> $GITHUB_ENV
          echo "$AI_REPLY" >> $GITHUB_ENV
          echo "EOF" >> $GITHUB_ENV
